(()=>{"use strict";document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("calendar-title"),t=document.getElementById("prev-month"),n=document.getElementById("next-month"),o=document.querySelectorAll(".calendar-table tbody td"),a=(document.getElementById("event-container"),document.getElementById("event-title")),c=document.getElementById("event-thumbnail"),d=document.getElementById("event-description");let l=new Date;function s(t=new Date){const n=t.getFullYear(),l=t.getMonth(),s=new Date,r=t.toLocaleDateString("en",{month:"long",year:"numeric"});e.textContent=r;const i=new Date(n,l,1),m=new Date(n,l+1,0).getDate(),u=i.getDay()||7;let h=new Date(n,l,0).getDate()-(u-2),g=1,E=1;o.forEach(((e,t)=>{if(e.innerHTML="",e.className="",t<u-1)e.textContent=h++,e.classList.add("prev-month");else if(g>m)e.textContent=E++,e.classList.add("next-month");else{const t=new Date(n,l,g).toISOString().split("T")[0];e.classList.add("current-month"),n===s.getFullYear()&&l===s.getMonth()&&g===s.getDate()&&e.classList.add("today"),e.innerHTML=`<span>${g++}</span>`,function(e){return fetch(`assets/events/${e}.json`).then((t=>{if(!t.ok)throw new Error(`No events found for ${e}`);return t.json()})).catch((e=>(console.warn(e.message),[])))}(t).then((t=>{t.forEach((t=>{const n=document.createElement("a");n.textContent=t.title,n.href="#",n.addEventListener("click",(e=>{e.preventDefault(),function(e){a.textContent=e.title,c.src=e.thumbnailUrl,c.alt=e.title,d.innerHTML=e.body}(t)})),e.appendChild(n)}))}))}}))}t.addEventListener("click",(()=>{l.setMonth(l.getMonth()-1),s(l)})),n.addEventListener("click",(()=>{l.setMonth(l.getMonth()+1),s(l)})),s(l)}))})();
(()=>{"use strict";document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("language-switcher-menu"),t=localStorage.getItem("language")||"sr";function n(e){fetch(`./assets/lang/${e}.json`).then((t=>{if(!t.ok)throw new Error(`Failed to load language file for ${e}`);return t.json()})).then((t=>{const n=document.querySelector("#language-switcher"),a=n.querySelector("img");if(n)if(a)a.src=`./assets/icons/${e}.png`,a.alt=t.languageName;else{const a=document.createElement("img");a.src=`./assets/icons/${e}.png`,a.alt=t.languageName,n.prepend(a)}Object.entries(t.translations).forEach((([e,t])=>{document.querySelectorAll(e).forEach((e=>{e.textContent=t}))}))})).catch((e=>console.error("Error updating content:",e)))}fetch("./assets/lang/_langlist.json").then((e=>{if(!e.ok)throw new Error("Failed to load _langlist.json");return e.json()})).then((e=>{const t=e.map((e=>{const t=e.replace(".json",""),n=`./assets/icons/${t}.png`;return fetch(`./assets/lang/${e}`).then((e=>e.json())).then((e=>{const a=document.createElement("li");return a.setAttribute("data-language",t),a.innerHTML=`\n                <a>\n                  <img src="${n}" alt="${t}">\n                  <span>${e.languageName}</span>\n                </a>\n              `,a}))}));return Promise.all(t)})).then((t=>{t.forEach((t=>{t&&e.appendChild(t)}))})).catch((e=>console.error("Error populating the language switcher menu:",e))).then((()=>{e.addEventListener("click",(e=>{const t=e.target.closest("li");if(t){const e=t.getAttribute("data-language");localStorage.setItem("language",e),n(e)}})),n(t)}))}))})();